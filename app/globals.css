@import "tailwindcss";
@import "tw-animate-css";

/* ============================================================================
   SMART WORD EDITOR - DESIGN SYSTEM
   
   Filosofia: "Il software deve sembrare banale"
   - Zero sorpresa, zero sperimentazione visiva
   - Stabilità, affidabilità, controllo
   - Aspetto da gestionale/software d'ufficio
   
   NO dark mode - utenti d'ufficio, ambiente controllato
   ============================================================================ */

/* ============================================================================
   DESIGN TOKENS (from specifications)
   ============================================================================ */

:root {
  /* -------------------------------------------------------------------------
     COLORI STRUTTURALI (90% dell'interfaccia)
     ------------------------------------------------------------------------- */

  /* Background principale - carta, documento, neutralità */
  --bg-main: #fafafa;

  /* Superfici secondarie - sidebar, pannelli */
  --bg-surface: #f2f3f5;

  /* Bordi / separatori - sempre visibili, mai protagonisti */
  --border: #e0e0e0;

  /* -------------------------------------------------------------------------
     TESTI
     ------------------------------------------------------------------------- */

  /* Testo principale - massimo contrasto leggibile, mai nero puro */
  --text-primary: #2e2e2e;

  /* Testo secondario / label - informativo, mai decorativo */
  --text-secondary: #8a8f98;

  /* -------------------------------------------------------------------------
     COLORI FUNZIONALI (usati con parsimonia)
     "se tutto è blu, niente è blu"
     ------------------------------------------------------------------------- */

  /* Azione primaria - solo pulsante principale, selezione attiva, focus */
  --action-primary: #2f6fed;
  --action-primary-hover: #2860d0;

  /* Successo / conferma - solo feedback espliciti */
  --success: #2e7d32;

  /* Errore - rarissimo, solo quando serve davvero */
  --error: #b3261e;

  /* -------------------------------------------------------------------------
     SHADCN/UI COMPATIBILITY LAYER
     Mapping dei nostri token ai nomi usati da shadcn
     ------------------------------------------------------------------------- */

  /* Backgrounds */
  --background: var(--bg-main);
  --foreground: var(--text-primary);

  /* Cards e superfici elevate */
  --card: #ffffff;
  --card-foreground: var(--text-primary);

  /* Popover (menu, dropdown) */
  --popover: #ffffff;
  --popover-foreground: var(--text-primary);

  /* Primary action */
  --primary: var(--action-primary);
  --primary-foreground: #ffffff;

  /* Secondary (bottoni secondari) */
  --secondary: var(--bg-surface);
  --secondary-foreground: var(--text-primary);

  /* Muted (testi e sfondi attenuati) */
  --muted: var(--bg-surface);
  --muted-foreground: var(--text-secondary);

  /* Accent (hover, stati attivi leggeri) */
  --accent: #ebedf0;
  --accent-foreground: var(--text-primary);

  /* Destructive */
  --destructive: var(--error);
  --destructive-foreground: #ffffff;

  /* Borders e inputs */
  --border: #e0e0e0;
  --input: #e0e0e0;
  --ring: var(--action-primary);

  /* -------------------------------------------------------------------------
     RADIUS
     Forme leggermente morbide, mai caratterizzanti
     6-8px uniforme ovunque
     ------------------------------------------------------------------------- */
  --radius: 0.375rem; /* 6px */

  /* -------------------------------------------------------------------------
     SIDEBAR (per componenti shadcn sidebar)
     ------------------------------------------------------------------------- */
  --sidebar: var(--bg-surface);
  --sidebar-foreground: var(--text-primary);
  --sidebar-primary: var(--action-primary);
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: #ebedf0;
  --sidebar-accent-foreground: var(--text-primary);
  --sidebar-border: var(--border);
  --sidebar-ring: var(--action-primary);

  /* -------------------------------------------------------------------------
     CHART COLORS (se servono grafici, colori sobri)
     ------------------------------------------------------------------------- */
  --chart-1: #2f6fed;
  --chart-2: #5b8def;
  --chart-3: #8baef2;
  --chart-4: #b8cff5;
  --chart-5: #e4edf9;
}

/* ============================================================================
   TAILWIND THEME INTEGRATION
   ============================================================================ */

@theme inline {
  /* Font - Inter per leggibilità, non personalità */
  --font-sans: "Inter", "Inter Fallback", system-ui, -apple-system, sans-serif;
  --font-mono: ui-monospace, "Cascadia Code", "Source Code Pro", monospace;

  /* Colors mapping */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  /* Radius scale */
  --radius-sm: calc(var(--radius) - 2px); /* 4px */
  --radius-md: var(--radius); /* 6px */
  --radius-lg: calc(var(--radius) + 2px); /* 8px */
  --radius-xl: calc(var(--radius) + 6px); /* 12px */

  /* Sidebar */
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

/* ============================================================================
   BASE STYLES
   ============================================================================ */

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Focus states - bordo blu sottile, niente glow */
  :focus-visible {
    @apply outline-none ring-1 ring-ring ring-offset-1 ring-offset-background;
  }
}

/* ============================================================================
   TIPTAP EDITOR STYLES
   ============================================================================ */

.ProseMirror {
  outline: none;
}

/* Placeholder per editor vuoto */
.ProseMirror p.is-editor-empty:first-child::before {
  color: var(--text-secondary);
  content: attr(data-placeholder);
  float: left;
  height: 0;
  pointer-events: none;
}

/* Selezione testo - azzurro chiarissimo, identico a Word */
.ProseMirror ::selection {
  background-color: rgba(47, 111, 237, 0.2);
}

/* Stili base paragrafo */
.ProseMirror p {
  margin-bottom: 1rem;
  min-height: 1.5em;
}

/* Bold, Italic, Underline */
.ProseMirror strong {
  font-weight: 600;
}

.ProseMirror em {
  font-style: italic;
}

.ProseMirror u {
  text-decoration: underline;
}

/* Cursore visibile */
.ProseMirror-focused {
  caret-color: var(--action-primary);
}

/* ============================================================================
   CHECKBOX STYLES
   ============================================================================ */

.tiptap-checkbox {
  font-size: 1.5em;
  line-height: 1;
  cursor: pointer;
  padding: 2px 4px;
  margin: 0 2px;
  border-radius: 4px;
  transition: all 0.15s ease;
  user-select: none;
  display: inline;
  vertical-align: middle;
}

.tiptap-checkbox:hover {
  background-color: var(--accent);
}

.tiptap-checkbox[data-checked="true"] {
  color: var(--success);
}

.tiptap-checkbox[data-checked="false"] {
  color: var(--text-secondary);
}

.tiptap-checkbox:active {
  transform: scale(0.95);
}

/* ============================================================================
   TABLE STYLES (docx-preview)
   ============================================================================ */

.docx-preview .ProseMirror table {
  border-collapse: collapse;
  width: 100%;
  margin: 0.75rem 0;
  table-layout: auto;
}

.docx-preview .ProseMirror td,
.docx-preview .ProseMirror th {
  border: 1px solid var(--border);
  padding: 0.5rem 0.75rem;
  text-align: left;
  vertical-align: top;
  min-width: 50px;
}

.docx-preview .ProseMirror th {
  background-color: var(--bg-surface);
  font-weight: 600;
}

.docx-preview .ProseMirror tr:nth-child(even) td {
  background-color: #fcfcfc;
}

/* Selezione nelle celle */
.docx-preview .ProseMirror td.selectedCell,
.docx-preview .ProseMirror th.selectedCell {
  background-color: rgba(47, 111, 237, 0.1);
}

.docx-preview .ProseMirror td p,
.docx-preview .ProseMirror th p {
  margin: 0;
}

/* ============================================================================
   UTILITY CLASSES
   ============================================================================ */

/* Testo modificato - highlight leggero */
.modified-text {
  background-color: rgba(46, 125, 50, 0.1);
  border-bottom: 2px solid var(--success);
}

/* Scrollbar sobria */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-secondary);
}
